# ACME DNS-01 (Pebble + exec) TLS
# Start the local Pebble stack first: scripts/acme-pebble.sh start
server:
  host: "127.0.0.1"
  port: 8443
  http_port: 8080
  workers: 1

tls:
  mode: "acme"
  domains:
    - "localhost"
  redirect_base_url: "https://localhost:8443"
  acme:
    provider: "lers"
    environment: "staging"
    directory_url: "https://localhost:14000/dir"
    insecure_skip_verify: true
    contact_email: "admin@example.com"
    challenge: "dns-01"
    dns:
      provider: "exec"
      exec:
        present_command: 'printf "{\"host\":\"_acme-challenge.%s.\",\"value\":\"%s\"}" "$ACME_DOMAIN" "$ACME_KEY_AUTHORIZATION" | curl -s -X POST http://127.0.0.1:8055/set-txt -H "Content-Type: application/json" -d @-'
        cleanup_command: 'printf "{\"host\":\"_acme-challenge.%s.\"}" "$ACME_DOMAIN" | curl -s -X POST http://127.0.0.1:8055/clear-txt -H "Content-Type: application/json" -d @-'

admin:
  path: "/admin"

users:
  auth_method: "local"
  local:
    jwt:
      secret: "test-secret"

navigation:
  max_dropdown_items: 7

logging:
  level: "info"

security:
  max_violations: 2
  cooldown_seconds: 30
  use_forwarded_for: false
  hsts_enabled: false
  hsts_max_age: 31536000
  hsts_include_subdomains: true
  hsts_preload: false

app:
  name: "NoPressure"
  description: "ACME DNS-01 TLS quick test"

upload:
  max_file_size_mb: 100

dev_mode: "localhost"
