<!--
This file is part of the product NoPressure.
SPDX-FileCopyrightText: 2025-2026 Zivatar Limited
SPDX-License-Identifier: AGPL-3.0-or-later
The code and documentation in this repository is licensed under the GNU Affero General Public License v3.0 or later (AGPL-3.0-or-later). See LICENSE.
-->

<div class="navbar-item has-dropdown" data-site-dropdown data-site-dropdown-hover="true">
    <a class="navbar-link" href="#" aria-expanded="false" data-site-dropdown-toggle>
        {{ user_name }}
    </a>
    <div class="navbar-dropdown is-right">
        <a class="navbar-item" href="/login/profile">Profile Settings</a>
        {% if has_admin_role %}
        <a class="navbar-item" href="{{ admin_path }}">Admin Dashboard</a>
        {% endif %}
        <a class="navbar-item" href="#" onclick="logout()">Logout</a>
    </div>
</div>
<script src="/builtin/admin/shared.js"></script>
<script>
    async function logout() {
        try {
            const response = await csrfFetch('/login/logout-api', {
                method: 'POST'
            });
            if (response.ok) {
                window.location.href = '/';
            }
        } catch (e) {
            console.error('Logout error:', e);
            window.location.href = '/';
        }
    }
</script>
